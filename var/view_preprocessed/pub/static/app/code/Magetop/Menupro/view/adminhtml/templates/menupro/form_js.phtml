<?php /** * Magetop * @category Magetop * @copyright Copyright (c) 2017 Magetop (http://magetop.com/) * @Author: Hanh Nguyen<hanhkaka.nguyen37@gamil.com> * @@Create Date: 2017-05-5 * @@Modify Date: 2017-06-05 */ ?> <?php $_baseurl = $this->helper("Magento\Backend\Helper\Data")->getUrl(); $string1 = strstr($_baseurl, 'admin/menupro'); $_baseurl = str_replace($string1, '', $_baseurl); ?> <script type="text/javascript">
require([
	'jquery',
	], function($){
	(function($){
		jQuery(document).ready(function($){
			var installScript = $('#groupmenu_description').text();
			if(installScript != ""){
				$('.help-install').hide();
				$('.help-note').show();
			}
			var fomarted = installScript.replace(/<br\/>/gi, "\n");
			$('#groupmenu_description').html(fomarted);
			(function($){var b,f,h,l,j=$(document),i=$("<div>"),k=$("<div>"),n=$("<div>"),o=$("<input>"),p=/^rgb[a]?\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d+\.\d+)*)?\)/,q=/([a-f0-9])([a-f0-9])([a-f0-9])/,r=/#[a-f0-9]{3}/,s=/#[a-f0-9]{6}/;$.fn.mColorPicker=function(a){var c=$.fn.mColorPicker.getCookie("swatches");b=$.extend($.fn.mColorPicker.defaults,a);$.fn.mColorPicker.defaults.swatches.concat(b.swatches).slice(-10);f.enhancedSwatches&&c&&(b.swatches=c.split("||").concat(b.swatches).slice(0,10)||b.swatches);$("div#mColorPicker").length||$.fn.mColorPicker.drawPicker();$("#css_disabled_color_picker").length||$("head").prepend('<meta data-remove-me="true"/><style id="css_disabled_color_picker" type="text/css">.mColorPicker[disabled] + span, .mColorPicker[disabled="disabled"] + span, .mColorPicker[disabled="true"] + span {filter:alpha(opacity=50);-moz-opacity:0.5;-webkit-opacity:0.5;-khtml-opacity: 0.5;opacity: 0.5;cursor:default;}</style>');$("meta[data-remove-me=true]").remove();this.each($.fn.mColorPicker.drawPickerTriggers);return this};$.fn.mColorPicker.init={replace:"[type=color]",index:0,enhancedSwatches:!0,allowTransparency:!0,slogan:"Meta100 - Designing Fun",showLogo:!0};$.fn.mColorPicker.defaults={currentId:!1,currentInput:!1,currentColor:!1,changeColor:!1,color:!1,imageFolder:"images/",swatches:"#ffffff,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000,#4c2b11,#3b3b3b,#000000".split(",")};$.fn.mColorPicker.start=function(){$('input[data-mcolorpicker!="true"]').filter(function(){return"[type=color]"==f.replace?"color"==this.getAttribute("type"):$(this).is(f.replace)}).mColorPicker()};$.fn.mColorPicker.events=function(){$("#mColorPickerBg").on("click",$.fn.mColorPicker.closePicker);$(".mColorPicker").on("keyup",function(){try{$(this).css({"background-color":$(this).val()}).css({color:$.fn.mColorPicker.textColor($(this).css("background-color"))}).trigger("change")}catch(a){}});$(".mColorPickerTrigger").on("click",$.fn.mColorPicker.colorShow);$(".mColor, .mPastColor").on("mousemove",function(a){if(!b.changeColor)return!1;var c=$(this),g=c.offset(),d=b.currentInput,d=d.attr("data-hex")||d.attr("hex");b.color=c.css("background-color");c.hasClass("mPastColor")?b.color=$.fn.mColorPicker.setColor(b.color,d):c.hasClass("mColorTransparent")?b.color="transparent":c.hasClass("mPastColor")||(b.color=$.fn.mColorPicker.whichColor(a.pageX-g.left,a.pageY-g.top,d));b.currentInput.mSetInputColor(b.color)}).on("click",$.fn.mColorPicker.colorPicked);$("#mColorPickerInput").on("keyup",function(a){try{b.color=$(this).val(),b.currentInput.mSetInputColor(b.color),13==a.which&&$.fn.mColorPicker.colorPicked()}catch(c){}}).on("blur",function(){b.currentInput.mSetInputColor(b.color)});$("#mColorPickerWrapper").on("mouseleave",function(){if(!b.changeColor)return!1;var a=b.currentInput;b.currentInput.mSetInputColor($.fn.mColorPicker.setColor(b.currentColor,a.attr("data-hex")||a.attr("hex")))})};$.fn.mColorPicker.drawPickerTriggers=function(){var a=$(this),c=a.attr("id")||"color_"+f.index++,g="hidden"==a.attr("text")||"hidden"==a.attr("data-text")?!0:!1,d=$.fn.mColorPicker.setColor(a.val(),a.attr("data-hex")||a.attr("hex")),e=a.width(),h=a.height(),i=a.css("float"),j=$("<span>"),m=$("<span>"),k="";j.attr({id:"color_work_area","class":"mColorPickerInput"}).appendTo(l);m.attr({id:"mcp_"+c,"class":"mColorPickerTrigger"}).css({display:"inline-block",cursor:"pointer"}).insertAfter(a);$("<img>").attr({src:b.imageFolder+"color.png"}).css({border:0,margin:"0 0 0 3px","vertical-align":"text-bottom"}).appendTo(m);j.append(a);k=j.html().replace(/type=[^a-z ]*color[^a-z 
			function getDirMcolorpicker () {
					var detected = detectDirMcolorpicker();
					var dir = detected!==false ? detected : '<?php echo $_baseurl; ?>' + 'pub/static/adminhtml/Magento/backend/en_US/Magetop_Menupro/js/';
				return dir;
			}

			function detectDirMcolorpicker() {
				var base = location.href;
				var e = document.getElementsByTagName('base');
				for(var i=0; i<e.length; i+=1) {
					if(e[i].href) { base = e[i].href; }
				}
				var e = document.getElementsByTagName('script');
				for(var i=0; i<e.length; i+=1) {
					if(e[i].src && /(^|\/)themes\.js([?#].*)?$/i.test(e[i].src)) {
						var src = new URI(e[i].src);
						var srcAbs = src.toAbsolute(base);
						srcAbs.path = srcAbs.path.replace(/[^\/]+$/, ''); 
						srcAbs.query = null;
						srcAbs.fragment = null;
						return srcAbs.toString();
					}
				}
				return false;
			}
			$images = getDirMcolorpicker()+ 'images/';
			$.fn.mColorPicker.init.replace = true ;
			$.fn.mColorPicker.defaults.imageFolder = $images;
			$.fn.mColorPicker.init.allowTransparency = true;
			$.fn.mColorPicker.init.showLogo = false;
			$(".mb-color").attr("data-hex", true).width("116px").mColorPicker();
		  	jQuery(document).on({ 
		  		mouseover: function() {jQuery.fn.mColorPicker.events(); $('#mColorPickerWrapper').hide()} 
		  	});
		  	$('body').click(function(event) {$('#mColorPicker').hide();});
			var selector = '.field-color';
		    $(selector).on("click", 'button', function(){
		    	var input = $(selector).find(".mb-color");
		    	input.each(function(index, el) {
		    		if(!$(this).parent().children('span').hasClass('mColorPickerTrigger')) $(this).attr("data-hex", true).width("116px").mColorPicker();
		    	});
		    });
		});
	})(jQuery);
});</script>